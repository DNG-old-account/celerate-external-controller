
<template name="customer_dashboard">
<body>
  <div class="navbar navbar-default" role="navigation">
    <div class="navbar-header">
      <a class="navbar-brand" href="#">Celerate</a>
      {{#if subscriberInfo}}
        <p class="navbar-text pull-right">Signed in as {{subscriberInfo.first_name}} {{subscriberInfo.last_name}}</p>
      {{/if}}
    </div>
  </div>
  <div class="container customer-dashboard-container">
    <div class="row">
      <div class="col-xs-12">
        <div class="page-header">
          <h1>Further Reach Customer Dashboard</h1>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-12">
        {{#if subscriberInfo.agreedToTerms}}
        {{else}}
        <div class="agreement-info-container">
          {{> agreement_info }}
        </div>
        {{/if}}
      </div>
    </div>
    <div class="row">
      <div class="col-xs-12">
        <div class="payments-info-container">
          {{> payments_info }}
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-6">
        <div class="plan-info-container">
          {{> plan_info }}
        </div>
      </div>
      <div class="col-xs-6">
        <div class="subscriber-info-container">
          {{> subscriber_info }}
        </div>
      </div>
    </div>
  </div>
</body>
</template>

<template name="subscriber_info">
<div class="panel panel-primary contact-info-panel">
  <div class="panel-heading">
    <h2>Contact Information</h2>
  </div>
  <div class="panel-body">
    <div class="col-xs-12">
      <div class="row">
        <div class="col-xs-12">
          <h3 class="sub-header">{{ subscriberInfo.first_name }} {{ subscriberInfo.last_name }}</h3>
        </div>
      </div>
      {{> contact_snippet subscriberInfo }}
      {{#if subscriberInfo.contactInfo}}
        {{#each subscriberInfo.contactInfo}}
        <h4>{{ capitalize this.type }}</h4>
        {{> contact_snippet this }}
      {{/each}}
      {{/if}}
      <button class="btn btn-success edit-contact-info">Edit Info</button>
    </div>
  </div>
</div>
</template>

<template name="contact_snippet">
{{#if showName}}
<div class="row">
  <div class="col-xs-2">
    <label>Name</label>
  </div>
  <div class="col-xs-10">
    <div>
      {{ this.first_name }} {{ this.last_name }}
    </div>
  </div>
</div>
{{/if}}
{{#if showEmail}}
<div class="row">
  <div class="col-xs-2">
    <label>Email</label>
  </div>
  <div class="col-xs-10">
    <div>
      {{#if this.prior_email}}
      {{ this.prior_email }}
      {{else}}
      {{#if this.email}}
        {{ this.email }}
      {{/if}}
      {{/if}}
    </div>
  </div>
</div>
{{/if}}
{{#if showAddress}}
<div class="row">
  <div class="col-xs-2">
    <label>Address</label>
  </div>
  <div class="col-xs-10">
    <div>
      {{ this.street_address }}
    </div>
    <div>
      {{ this.city }}, {{ this.state }} {{ this.zip_code }}
    </div>
  </div>
</div>
{{/if}}
</template>

<template name="agreement_info">
<div class="panel panel-warning">
  <div class="panel-heading">
    <h2>Customer Agreement</h2>
  </div>
  <div class="panel-body">
    <div class="col-xs-12">
      <div class="row">
        <div class="col-xs-12">
          You haven't agreed to the terms and conditions yet! Click below to view them.
        </div>
      </div>
      <div class="row">
        <div class="col-xs-12">
          <button class="btn btn-success terms-conditions">Terms and Conditions</button>
        </div>
      </div>
    </div>
  </div>
</div>
</template>

<template name="payments_info">
<div class="panel panel-primary">
  <div class="panel-heading">
    <h2>Payment Info</h2>
  </div>
  <div class="panel-body">
    <div class="col-xs-12">
      {{#if showCharges }}
      <h3 class="sub-header">Charges</h3>
      {{#each paymentInfo.charges}}
      <div class="row charge-row">
        <div class="col-xs-2 charge-date">
          Date: {{ this.dateCreatedString }} 
        </div>
        <div class="col-xs-10">
          <div class="row">
            <div class="col-xs-12">
              Amount: ${{ this.dollarAmount }}
            </div>
          </div>
          <div class="row">
            <div class="col-xs-12">
              Description: {{ this.description }}
            </div>
          </div>
        </div>
      </div>
      {{/each}}
      {{/if}}
    </div>
  </div>
</div>
<div class="json-dump">
  <pre>
    {{{json paymentInfo}}}
  </pre>
</div>
</template>
<template name="plan_info">
<div class="panel panel-primary">
  <div class="panel-heading">
    <h2>Your Plan</h2>
  </div>
  <div class="panel-body">
    <div class="col-xs-12">
      <h3 class="sub-header">{{ planInfo.label }}</h3>
      <div class="row">
        <div class="col-xs-12">
          <label>Monthly Price:</label> ${{planInfo.monthly}}
        </div>
      </div>
      <div class="row">
        <div class="col-xs-12">
          <label>Details:</label>
          {{ planInfo.details }}
        </div>
      </div>
    </div>
  </div>
</div>
</template>
