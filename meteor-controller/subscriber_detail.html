<template name="subscriber_details">
<div class="subscriber-details-container">
{{#if is_archived}}
<div class="alert alert-warning" role="alert"><strong>Warning:</strong> This is an ARCHIVED Subscriber</div>
{{/if}}

<a href="{{user_billing_link}}" role="button" class="btn btn-success" target="_blank">User Billing Setup</a>
{{#if is_archived}}
{{else}}
<button type="button" class="archive_subscriber_button btn btn-warning">Archive Subscriber</button>
{{/if}}
{{#with ..}}
<button type="button" class="delete_subscriber_button btn btn-danger">Delete Subscriber</button>
{{/with}}
{{#if site_link}}
<a href="/site_details/{{site_link._id._str}}" role="button" class="btn btn-success" target="_blank">Associated Site</a>
{{/if}}
<hr>

<form class="form-horizontal" role="form">

<ul class="nav nav-pills" role="tablist">
  <li class="active"><a href="#basic_info" role="tab" data-toggle="tab">Basic Info</a></li>
  <li><a href="#scheduling" role="tab" data-toggle="tab">Scheduling</a></li>
  <li><a href="#extra_contact_info" role="tab" data-toggle="tab">Extra Contact Info</a></li>
  <li><a href="#billing_info" role="tab" data-toggle="tab">Billing Info</a></li>
</ul>
<div class="tab-content">

<div class="tab-pane active" id="basic_info">
<button type="button" id="get_location_button" class="get_location_button btn btn-info btn-sm">Get Current Location</button>
{{#each basic_info_fields}}
<div class="form-group">
  <div class="container-fluid">
    <div class="col-xs-2"><label for="{{field}}" class="control-label">{{label}}</label></div>
    {{#if options}}
    <div class="col-xs-8"><select class="form-control" id="{{field}}" disabled>
        <option value="" {{selected_if_empty ../value}}></option>
        {{#each options}}
        <option value="{{this}}" {{selected_if_equal this ../value}}>{{this}}</option>
        {{/each}}
    </select></div>
    {{else}}
    <div class="col-xs-8"><input class="form-control" id="{{field}}" type="text" value="{{value}}" disabled></div>
    {{/if}}
    {{#with ..}}
    <div class="col-xs-2">
      <span class="glyphicon-pencil glyphicon" style="padding: 10px 18px 0px 0px; font-size: 18px;" title="Edit" id="edit"></span>
      <span class="glyphicon-save glyphicon text-gray" style="padding: 10px 18px 0px 0px; font-size: 18px;" title="Save" id="save"></span>
    </div>
    {{/with}}
  </div>
</div>
{{/each}}
</div>

<div class="tab-pane" id="billing_info">
  <div class="container">
    <div class="agreed-to-terms"><h4>Has agreed to terms: {{{terms_info.agreed_to_terms}}}</h4></div>
    <form class="form-horizontal billing-form" role="form">
      <div class="form-group">
        <label for="billing_standard_installation" class="col-sm-2 control-label">Standard Installation:</label>
        <div class="col-sm-10">
          <input type="text" class="form-control billing-field" id="standard_installation" value="{{billing_info.installation.standard_installation}}">
        </div>
      </div>
      <div class="form-group">
        <label for="paid_installation" class="col-sm-2 control-label">Paid for Installation:</label>
        <div class="col-sm-10">
          <select id="paid_installation" class="form-control">
            {{#if billing_info.installation.paid}}
            <option value=true selected>Yes</option>
            <option value=false>No</option>
            {{else}}
            <option value=true>Yes</option>
            <option value=false selected>No</option>
            {{/if}}
          </select>
        </div>
      </div>
      <fieldset disabled>
        <button class="btn btn-warning" id="add_equipment">Add Installation Equipment</button>
        <button class="btn btn-warning" id="add_labor">Add Labor Hours</button>
      </fieldset>
      {{#each billing_info.installation.additional_equipment}}
      {{/each}}
      {{#each billing_info.installation.additional_labor}}
      {{/each}}
      <button id="update_billing" class="btn btn-success">Save</button>
    </form>
  </div>
</div>

<div class="tab-pane" id="scheduling">
{{#each scheduling_fields}}
<div class="form-group">
  <div class="container-fluid">
    <div class="col-xs-2"><label for="{{field}}" class="control-label">{{label}}</label></div>
    {{#if options}}
    <div class="col-xs-8"><select class="form-control" id="{{field}}" disabled>
      <option value="" {{selected_if_empty ../value}}></option>
      {{#each options}}
      <option value="{{this}}" {{selected_if_equal this ../value}}>{{this}}</option>
      {{/each}}
    </select></div>
    {{else}}
    <div class="col-xs-8"><input class="form-control" id="{{field}}" type="text" value="{{value}}" disabled></div>
    {{/if}}
    {{#with ..}}
    <div class="col-xs-2">
      <span class="glyphicon-pencil glyphicon" style="padding: 10px 18px 0px 0px; font-size: 18px;" title="Edit" id="edit"></span>
      <span class="glyphicon-save glyphicon text-gray" style="padding: 10px 18px 0px 0px; font-size: 18px;" title="Save" id="save"></span>
    </div>
    {{/with}}
  </div>
</div>
{{/each}}
</div>

<div class="tab-pane" id="extra_contact_info">
  {{> subscriber_contacts}}
</div>

</div>
</form>
</div>
</template>
